const regalo=document.querySelector("#regalo"),nombre=document.querySelector("#nombre"),apellido=document.querySelector("#apellido"),email=document.querySelector("#email"),pase_dia=document.querySelector("#pase_dia"),pase_dosdias=document.querySelector("#pase_dosdias"),pase_completo=document.querySelector("#pase_completo"),etiquetas=document.querySelector("#etiquetas"),camisas=document.querySelector("#camisa_evento"),calcular=document.querySelector("#calcular"),listaProductos=document.querySelector("#lista_productos"),sumaTotal=document.querySelector("#suma_total");let totalPagar,total;if(document.getElementById("calcular")){function a(){const a=[],b=parseInt(pase_dia.value,10)||0,c=parseInt(pase_dosdias.value,10)||0,d=parseInt(pase_completo.value,10)||0;0<b?(a.slice(0,a.length),a.push("viernes")):0==b&&(document.querySelector("#viernes").style.display="none"),0<c?(a.slice(0,a.length),a.push("viernes","sabado")):0==c&&(document.querySelector("#viernes").style.display="none",document.querySelector("#sabado").style.display="none"),0<d?(a.slice(0,a.length),a.push("viernes","sabado","domingo")):0==d&&(document.querySelector("#viernes").style.display="none",document.querySelector("#sabado").style.display="none",document.querySelector("#domingo").style.display="none");for(let b=0;b<a.length;b++)document.getElementById(a[b]).style.display="block"}function b(){if(""!=nombre.value&&""!=apellido.value&&""!=email.value&&""!=regalo.value){document.getElementById("total_pedido").value=total,document.querySelector("#paypal-button-container")&&document.querySelector("#paypal-button-container").remove();const a=document.querySelector(".total"),b=document.createElement("div");b.id="paypal-button-container",a.appendChild(b),c()}}function c(){let a;paypal.Buttons({onInit(a,b){b.disable(),""!=nombre.value&&""!=apellido.value&&""!=email.value&&""!=regalo.value?(b.enable(),document.getElementById("total_pedido").value=total):b.disable()},onClick(){a=new FormData(document.querySelector("form#registro"));for(const b of a.entries())console.log(`${b[0]}, ${b[1]}`)},createOrder(){return fetch("pagar.php",{method:"post",body:a}).then(a=>a.json()).then(a=>a.orderID)},onApprove(b,c){return c.order.capture().then(()=>{const c=new XMLHttpRequest;c.open("POST","includes/modelo-datos.php",!0),c.onload=function(){if(200===this.status){const a=JSON.parse(c.responseText);console.log(c.responseText),console.log(a),window.location="exito"==a.res?`captureOrder.php?exito=1&orderID=${b.orderID}`:`captureOrder.php?exito=1&orderID=${b.orderID}`}},c.send(a)})}}).render("#paypal-button-container")}calcular.addEventListener("click",a=>{if(a.preventDefault(),""==regalo.value)alert("Debes elegir un regalo");else{const a=parseInt(pase_dia.value,10)||0,c=parseInt(pase_dosdias.value,10)||0,d=parseInt(pase_completo.value,10)||0,e=parseInt(camisas.value,10)||0,f=parseInt(etiquetas.value,10)||0;totalPagar=30*a+45*c+50*d+.93*(10*e)+2*f,total=totalPagar.toFixed(2);const g=[];1<=a&&g.push(`${a} Pases por dia`),1<=c&&g.push(`${c} Pases por 2 dias`),1<=d&&g.push(`${d} Pases completos`),1<=e&&g.push(`${e} Camisas`),1<=f&&g.push(`${f} Etiquetas`),listaProductos.style.display="block",listaProductos.innerHTML="";for(let a=0;a<g.length;a++)listaProductos.innerHTML+=`${g[a]}<br>`;sumaTotal.innerHTML=`$${total}`,b()}}),pase_dia.addEventListener("change",a),pase_dosdias.addEventListener("change",a),pase_completo.addEventListener("change",a);const d=document.querySelector("form.formulario-editar");d&&(pase_dia.value||pase_dosdias.value||pase_completo.value)&&a()}